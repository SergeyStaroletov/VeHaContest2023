# Deductive Verification

## Задача по дедуктивной верификации программы, предназначенной для решения такой проблемы миссии "Луна-25", как проверка равенства всех приоритетов в массиве команд

## Команда
* Алексеев Николай
* Дац Павел
* Субботин Дмитрий

### Дано

1. Файл ```element_equality.c```, содержащий определение одноименной функции, проверяющей равенство всех элементов целочисленного массива. 
2. В файле также определено предусловие этой функции на языке Lisp. Оно написано в виде комментария перед определением функции.

### Задачи

1. Определить функцию, аргументами которой будут нижний и верхний индекс массива и сам массив непосредсвенно. Функция должна возвращать 0, если хотя бы один элемент, начиная с нижнего индекса и заканчивая верхним, отличается от всех остальных. Во всех остальных случаях функция должна возвращать 1. Дать ей уникальное имя.
2. Задать для функции ```element_equality``` постусловие в виде равенства применения введенной функции к границам индексов, покрывающим весь массив, а также к самому массиву, и переменной result, в которой хранится возвращаемое функцией ```element_equality``` значение. Постусловие задачется на языке Lisp в виде коментария после определения функции ```element_equality```.
3. Создать файл  ```element_equality.lisp```. Заполнить файл следующим содержимым:
```
(in-package "ACL2")
(include-book "std/util/defrule" :dir :system)
(include-book "centaur/fty/top" :dir :system)
(include-book "std/util/bstar" :dir :system)
(include-book "std/typed-lists/top" :dir :system)
(include-book "std/lists/top" :dir :system)
(include-book "std/basic/inductions" :dir :system)
```
4. Реализовать на языке Lisp функцию, определенную в п.1. и поместить ее в созданный раннее файл.
5. Проверить возможность генерации условий корректности с возможностью их последующего доказательства. Для этого запустить программу C-lightVer со следующими параметрами:
```
C-lightVer element_equality.c element_equality_report.txt element_equality
```

### Ожидаемый результат
Должны быть порождены следующие файлы:
```
element_equality-verification-condition-theory.lisp
element_equality-verification-condition-1.lisp
element_equality-verification-condition-theory.cert
element_equality-verification-condition-1.cert
```
Наличие этих файлов позволяет убедиться в том, что доказательство корректности сгенерированной теории прошло успешно.

Для решения нужно приложить следующие файлы:
```
element_equality.c
element_equality.lisp
element_equality-verification-condition-theory.lisp
element_equality-verification-condition-1.lisp
element_equality-verification-condition-theory.cert
element_equality-verification-condition-1.cert
```

## Решение
В задаче было необходимо реализовать постусловие, имеющее следующий вид: `/* (= (element-equality 0 (- n 1) a) result) */`.
Это условие означает, что переменная `result` после выполнения функции `element_equality` будет равна результату выполнения функции `element-equality`, определенной в теории предметной области, с параметрами `0`, `n-1`, `a`, где `n` - это длинна массива `a`, `a` - массив из целочисленных элементов.
Функция `element-equality` реализована на языке `lisp` и рекурсивно проверяет равенство элементов в массиве начиная с индекса `i` и заканчивая индексом `j`. При этом функция возвращает `0`, если хотя бы один из элекментов отличается от остальных элементов из данного промежутка, и `1`, если все элементы равны. Так же функция возвращает `0`, если `i` больше `j`.
